@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix dbo:  <http://dbpedia.org/ontology/> .
@prefix dbr:  <http://dbpedia.org/resource/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix ex:   <http://example.org/shapes/> .

ex:BarcaPlayersShape
  a sh:NodeShape ;

  # všichni, co mají team
  sh:targetSubjectsOf dbo:team ;

  # musí hrát za FC Barcelona
  sh:property [
    sh:path dbo:team ;
    sh:hasValue dbr:FC_Barcelona ;
    sh:minCount 1 ;
    sh:message "Player must have dbo:team = FC Barcelona." ;
  ] ;

  # alespoň jedno jméno
  sh:property [
    sh:path foaf:name ;
    sh:minCount 1 ;
    sh:message "Player must have at least one foaf:name." ;
  ] ;

  # datum narození – povinné
  sh:property [
    sh:path dbo:birthDate ;
    sh:minCount 1 ;
    sh:datatype xsd:date ;
    sh:message "Missing or invalid dbo:birthDate (must be xsd:date)." ;
  ] ;

  # pozice – povinná, IRI
  sh:property [
    sh:path dbo:position ;
    sh:minCount 1 ;
    sh:nodeKind sh:IRI ;
    sh:message "Missing or invalid dbo:position (must be IRI)." ;
  ] ;

  # výška – nepovinná, ale musí být číslo
  sh:property [
    sh:path dbo:height ;
    sh:or (
      [ sh:datatype xsd:double ]
      [ sh:datatype xsd:decimal ]
    ) ;
    sh:severity sh:Warning ;
    sh:message "If present, dbo:height should be numeric." ;
  ] ;

  # číslo dresu – nepovinné, integer
  sh:property [
    sh:path dbo:number ;
    sh:or (
      [ sh:datatype xsd:integer ]
      [ sh:datatype xsd:nonNegativeInteger ]
    ) ;
    sh:severity sh:Warning ;
    sh:message "If present, dbo:number should be integer." ;
  ] .
